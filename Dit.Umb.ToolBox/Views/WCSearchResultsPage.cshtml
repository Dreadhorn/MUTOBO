@using ClientDependency.Core.Mvc
@using Dit.Umb.MKulturProzent.Classics.Models.Constants
@using Umbraco.Web.Composing
@inherits Umbraco.Web.Mvc.UmbracoViewPage<Dit.Umb.ToolBox.Models.PageModels.SearchResultModel>

@{
    Layout = "WCClassicsBasePage.cshtml";

}
@section CustomElementsDefine {
    <script>
        [
            ['p-general', General],
            ['o-header', Header],
            ['a-logo', Logo],
            ['m-navigation', Navigation],
            ['o-body', Body],
            ['o-stage', Stage],
            ['o-highlight-list', HighlightList],
            ['m-highlight', Highlight],
            ['o-footer', Footer],
            ['m-flyer', Flyer],
            ['m-teaser', Teaser],
            ['a-input', Input],
            ['a-button', Button],
            ['a-title', Title],
            ['m-form', Form],
            ['o-teaser-wrapper', TeaserWrapper]

        ].forEach(element => {
            // don't define already existing customElements
            if (element && !customElements.get(element[0])) customElements.define(...element)
        })
    </script>
}
<o-body>
    @Html.Action("Index", "SearchForm")
    
    @if (!string.IsNullOrEmpty(Model.Term))
    {
        <h3>@Umbraco.GetDictionaryValue("SearchResultsPageTitle")</h3>
        if (Model.Results.Any())
        {
            //TODO: Texte in DictionaryKeys
            <p>@string.Format(Current.UmbracoHelper.GetDictionaryValue(DictionaryKeys.SearchPage.IntroText), Model.Term, Model.Results.Count())</p>

            foreach (var searchResults in Model.Results)
            {
                <div>
                    <h4>@searchResults.Title</h4>
                    <p>@Html.Raw(searchResults.Abstract)</p>
                    @*Uncomment this to reenable PDF-Results *@
                    @*@if (searchResults.Documents != null && searchResults.Documents.Any())
                    {

                        <p>
                            @(string.Format(Current.UmbracoHelper.GetDictionaryValue(DictionaryKeys.SearchPage.PdfResultText), Model.Term)) 
                            <ul>
                                @foreach (var doc in searchResults.Documents)
                                {
                                    <li><a href="@doc.Url" target="">@doc.Name</a></li>

                                }
                            </ul>
                        </p>
                    }*@
                        <a href="@searchResults.Url">@searchResults.UrlTitle</a>
                </div>
            }
        }
        else
        {
            <p>@Umbraco.GetDictionaryValue("SearchResultsPageNoResults") "@Model.Term"</p>
        }
    }
</o-body>